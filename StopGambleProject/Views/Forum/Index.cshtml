@using Project.Data.Models
@model StopGambleProject.Models.Forum.ForumIndexModel

<div class="ui center aligned text container">
    <h1 class="ui huge header">Forum List
     @if (User.IsInRole("Admin"))
            {
                <div class="three wide column">
                    <a href="/Forum/Create" class="ui teal button"> Create Forum</a>
                </div>
            }
    </h1>
</div>

@if (Model.ForumList.Count() == 0)
{
    <div class="ui center aligned text container">
    <div class="ui massive red message">
        @if (User.IsInRole("Admin"))
        {
            <p>No forums have been setup yet - please <a href="/Forum/Create">create</a> a forum to get started.</p>
        }
        else
        {
            <p>The administrator hasn't set up any forum topics yet. </p>
        }
    </div>
    </div>
}
else
{
    <div class="ui center aligned text container" style="padding-bottom: 25px">
        <table class="ui celled table" id="forumIndexTable">
            <tbody>
            @foreach (var forum in Model.ForumList)
            {
                <tr>
                    <td class="collapsing">
                        <img class="ui small image" src="@forum.ImageUrl" style="width:40px;height:40px;"/>
                    </td>
                    <td class="collapsing" style="border-left: none">
                        <a asp-contoller="Forum" asp-action="Topic" asp-route-id="@forum.Id">@forum.Name
                            @if (forum.HasRecentPost)
                            {
                                <i class="fire icon" style="color:red"></i>
                            }
                        </a>
                    </td>
                    <td>
                        @forum.Description
                    </td>
                    <td>
                        <i class="envelope open outline icon"></i> Posts: @forum.NumberOfPosts <br/>
                        <i class="user icon"></i> Users: @forum.NumberOfUsers
                    </td>
                </tr>
            }
          
            </tbody>
        </table>
    </div>
    
}
 
